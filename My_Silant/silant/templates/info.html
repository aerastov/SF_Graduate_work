{% extends 'default.html' %}
{% load auth_extras %}

{% block content %}
    {% include "fragments/username_group.html" %}<br>
    {% include "fragments/menu.html" %}

    <h6 class="center">Информация о комплектации и технических<br>характеристиках Вашей техники</h6>

    {% if request.user|has_group:"manager" or request.user|has_group:"admin" %}
        <div class="center">
            <a class="btn btn-outline-secondary" href="{% url 'create_car' %}" role="button">Добавить запись</a>
            <a class="btn btn-outline-secondary" href="{% url 'reference_book' %}" role="button">Редактор справочников</a>
        </div>
    {% endif %}

    {% if cars %}
        <table>
        <tr>
            <th><a href="?order_by=factory_number">№:</a></th>
            <th><a href="?order_by=technique_model">модель тех.:</a></th>
            <th><a href="?order_by=engine_model">модель двиг.:</a></th>
            <th><a href="?order_by=transmission_model">модель трансм.:</a></th>
            <th><a href="?order_by=drive_axle_model">модель вед. моста:</a></th>
            <th><a href="?order_by=steerable_axle_model">модель упр-го моста:</a></th>
            <th><a href="?order_by=date_of_shipment_from_the_factory">отгрузка:</a></th>
        </tr>
        {% for car in cars %}
            <tr class="table_tr">
                <td><a href="/info/{{ car.id }}">{{ car.factory_number }}</a></td>
                <td><a href="/info/{{ car.id }}">{{ car.technique_model }}</a></td>
                <td><a href="/info/{{ car.id }}">{{ car.engine_model }}</a></td>
                <td><a href="/info/{{ car.id }}">{{ car.transmission_model }}</a></td>
                <td><a href="/info/{{ car.id }}">{{ car.drive_axle_model }}</a></td>
                <td><a href="/info/{{ car.id }}">{{ car.steerable_axle_model }}</a></td>
                <td><a href="/info/{{ car.id }}">{{ car.date_of_shipment_from_the_factory|date:"d.m.Y" }}</a></td>
            </tr>
        {% endfor %}
        </table>
    {% else %}
        <h6 class="center">Нет записей о машинах, которые вам доступны к просмотру.</h6>

        {% if request.user|has_group:"manager" or request.user|has_group:"admin" %}
            <div class="center">
                <a class="btn btn-outline-secondary" href="{% url 'create_car' %}" role="button">Добавить первую запись о машине</a>
                <a class="btn btn-outline-secondary" href="{% url 'reference_books' %}" role="button">Редактор справочников</a>
            </div>
        {% endif %}

    {% endif %}
{% endblock content %}